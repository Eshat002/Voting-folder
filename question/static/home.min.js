const question_show_box=document.getElementById("question-show-box"),image_A=document.getElementById("imageA"),image_B=document.getElementById("imageB"),otherCount=document.getElementById("other-count"),load_more_questions=document.getElementById("load-more-questions"),spinner_box_questions=document.getElementById("spinner-box-questions"),vote=()=>{buttons=[...document.getElementsByClassName("buttons-f")],buttons.forEach(t=>t.addEventListener("click",t=>{t.stopImmediatePropagation(),t.preventDefault();const e=t.target.getAttribute("data-btn-id"),o=t.target.getAttribute("data-btn-type");clickedBtn=t.target;let n="";"A"==o?n="B":"B"==o&&(n="A"),console.log("otherBtn",n),console.log("btnId",e),console.log("btntype",o),$.ajax({type:"POST",url:"vote/",data:{csrfmiddlewaretoken:csrftoken,btnId:e,btnType:o},success:function(t){console.log(t),"A"==o&&(clickedBtn.innerHTML=`\n                ${t.voteA?`Voted (${t.countA<999?t.countA:numeral(t.countA).format("0.0a")})`:`Vote (${t.countA<999?t.countA:numeral(t.countA).format("0.0a")})`}`,otherCount.value=t.otherCount,buttons.forEach(o=>{o.getAttribute("data-btn-id")==e&&o.getAttribute("data-btn-type")==n&&(o.innerHTML=`${t.is_votedB?`Voted (${otherCount.value<999?otherCount.value:numeral(otherCount.value).format("0.0a")})`:`Vote (${otherCount.value<999?otherCount.value:numeral(otherCount.value).format("0.0a")})`}`,console.log("trueAf",otherCount.value))}),console.log("other-count",otherCount.value)),"B"==o&&(clickedBtn.innerHTML=`\n                      ${t.voteB?`Voted (${t.countB<999?t.countB:numeral(t.countB).format("0.0a")})`:`Vote (${t.countB<999?t.countB:numeral(t.countB).format("0.0a")})`}`,otherCount.value=t.otherCount,buttons.forEach(o=>{o.getAttribute("data-btn-id")==e&&o.getAttribute("data-btn-type")==n&&(o.innerHTML=`${t.is_votedA?`Voted (${otherCount.value<999?otherCount.value:numeral(otherCount.value).format("0.0a")})`:`Vote (${otherCount.value<999?otherCount.value:numeral(otherCount.value).format("0.0a")})`}`,console.log("trueAf",otherCount.value))}),console.log("other-count",otherCount.value))},error:function(t){console.log(t)}})}))};let dyna_visible_questions=5;const getQuestions=()=>{$.ajax({url:`get-questions/${dyna_visible_questions}/`,success:function(t){console.log("questions",t),setTimeout(()=>{spinner_box_questions.classList.add("not-visible"),data=t.data,data.forEach(function(t){question_show_box.innerHTML+=`\n            \n           \n\n           <div class="container mb-2">\n             \n\n           <div class="row border-1 border-bottom p-2 border-success mb-2 ">  \n           <div>\n           <h4 class="text-center mb-3"> ${t.question}</h4>   \n          </div>\n            <div class="col-6 p-1">\n           <div class="float-end" id="imageADiv">\n           <img  id="imageA" src="${t.imageA}">\n \n           <button data-btn-id=${t.id} data-btn-type="A" class='voteA btn btn-primary  buttons-f  mt-1 float-start  border none  rounded' id="voteA">\n           ${t.is_votedA?`Voted (${t.countA<999?t.countA:numeral(t.countA).format("0.0a")})`:`Vote (${t.countA<999?t.countA:numeral(t.countA).format("0.0a")})`}\n           \n           </button>\n           <br>\n          </div>\n          \n \n            </div>\n           \n           <div class="col-6 p-1"> \n          <div id="imageBDiv" class="text-start">\n           \n           <img class="img-fluid" id="imageB" src="${t.imageB}"  >\n           <button data-btn-id=${t.id} data-btn-type="B" class=' voteB buttons-f  btn btn-primary mt-1 float-start  border none  rounded' id="voteB"> \n           ${t.is_votedB?`Voted (${t.countB<999?t.countB:numeral(t.countB).format("0.0a")})`:`Vote (${t.countB<999?t.countB:numeral(t.countB).format("0.0a")})`}\n             \n             </button>\n           <br>\n </div>\n </div>       \n       </div>  \n       \n  </div><br><br><br><br>`}),vote()},1e3),0===t.size?load_more_questions.classList.add("not-visible"):t.size<=dyna_visible_questions&&load_more_questions.classList.add("not-visible")},error:function(t){}})};$("#load-more-questions").unbind("click").bind("click",function(t){t.stopImmediatePropagation(),spinner_box_questions.classList.remove("not-visible"),dyna_visible_questions+=5,getQuestions()}),getQuestions();